<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KIFARU TRAILS ‚Äî Where the Wild Leads You</title>
  <meta name="description" content="Kifaru Trails ‚Äî premium Tanzanian safaris, culture tours, Kilimanjaro treks and Zanzibar escapes.">
  <meta name="theme-color" content="#213d29">
  <style>
    /* ---------- VARIABLES ---------- */
    :root{
      --green-600:#2f5f3a;
      --green-800:#18321f;
      --orange-500:#d67b28;
      --sand:#f6efe0;
      --muted:#5f6b63;
      --glass: rgba(255,255,255,0.06);
      --max-w:1200px;
      --radius:14px;
      --transition:300ms cubic-bezier(.2,.9,.25,1);
      --text:#10221a;
      --bg:#fbfaf6;
    }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased;}
    a{color:inherit}
    img{max-width:100%;display:block;border-radius:8px}
    main{max-width:var(--max-w);margin:0 auto;padding:28px}
    .container{width:100%;max-width:var(--max-w);margin:0 auto;padding:0 20px}

    /* ---------- HEADER / NAV ---------- */
    header{position:sticky;top:0;z-index:60;background:linear-gradient(180deg,rgba(255,255,255,0.85),rgba(255,255,255,0.6));backdrop-filter: blur(6px);display:flex;align-items:center;justify-content:space-between;padding:14px 20px;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:10px;background:var(--green-600);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-family:Georgia}
    nav ul{display:flex;gap:16px;align-items:center;list-style:none;margin:0;padding:0}
    nav a{padding:8px 10px;border-radius:8px;display:inline-block;font-weight:600}
    nav a:hover{background:rgba(0,0,0,0.04)}

    /* ---------- HERO ---------- */
    .hero{display:grid;grid-template-columns:1fr;gap:20px;padding:28px;border-radius:16px;overflow:hidden}
    .hero-visual{position:relative;border-radius:12px;overflow:hidden;box-shadow:0 30px 60px rgba(16,24,32,0.12)}
    .hero-visual::after{content:'';position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0.12),rgba(0,0,0,0.06))}
    .hero-inner{position:absolute;left:32px;bottom:32px;color:#fff;z-index:4;max-width:720px}
    .hero h1{font-family:Georgia,serif;font-size:44px;margin:0 0 8px;line-height:1.02}
    .hero p{margin:0 0 14px;color:rgba(255,255,255,0.93);font-size:17px}
    .cta-row{display:flex;gap:12px;flex-wrap:wrap}
    .btn{padding:10px 16px;border-radius:10px;border:none;cursor:pointer;font-weight:700;transition:all var(--transition)}
    .btn.primary{background:var(--green-600);color:#fff}
    .btn.secondary{background:transparent;border:2px solid rgba(255,255,255,0.16);color:#fff}

    /* ---------- SECTIONS ---------- */
    section{padding:44px 0;border-bottom:1px solid rgba(0,0,0,0.04)}
    h2{font-size:26px;margin:0 0 12px}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:28px;align-items:center}
    .lead{color:var(--muted);font-size:15px;line-height:1.6}

    /* ---------- CARDS / TOURS ---------- */
    .cards{display:grid;grid-template-columns:repeat(4,1fr);gap:18px;margin-top:12px}
    .card{border-radius:12px;overflow:hidden;background:#fff;box-shadow:0 18px 40px rgba(16,24,32,0.06);display:flex;flex-direction:column;transition:transform 420ms var(--transition),box-shadow 420ms var(--transition)}
    .card:hover{transform:translateY(-8px) scale(1.01);box-shadow:0 36px 80px rgba(16,24,32,0.12)}
    .card .thumb{height:160px;background-size:cover;background-position:center}
    .card .meta{padding:14px}
    .card h3{margin:0 0 8px;font-size:18px}
    .card p{margin:0 0 12px;color:var(--muted);font-size:14px}
    .card .read{display:inline-block;padding:8px 12px;border-radius:8px;background:var(--green-600);color:#fff;font-weight:700;text-decoration:none}

    /* ---------- WHY CHOOSE ---------- */
    .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
    .why-box{background:linear-gradient(180deg,#fff,#fbfaf5);padding:20px;border-radius:12px;text-align:center;box-shadow:0 12px 30px rgba(16,24,32,0.06)}
    .why-box .icon{font-size:28px;margin-bottom:8px}

    /* ---------- TESTIMONIALS ---------- */
    .carousel{display:flex;gap:12px;overflow:hidden;padding-top:8px}
    .quote{min-width:280px;padding:18px;border-radius:12px;background:linear-gradient(180deg,#fff,#f9f8f3);box-shadow:0 12px 30px rgba(16,24,32,0.06)}

    /* ---------- CTA STRIP ---------- */
    .cta-strip{border-radius:12px;padding:26px;background-image:linear-gradient(120deg,var(--green-800),#0b2616);color:#fff;display:flex;align-items:center;justify-content:space-between;gap:14px}
    .cta-strip h3{margin:0;font-size:22px}

    /* ---------- FOOTER ---------- */
    footer{padding:28px 20px;display:flex;justify-content:space-between;align-items:center;gap:12px;background:linear-gradient(180deg,#0b1a12, #07120b);color:#fff;border-radius:12px;margin-top:28px}

    /* ---------- MODAL ---------- */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.45);z-index:400}
    .modal .panel{background:#fff;padding:18px;border-radius:12px;max-width:900px;width:94%;max-height:86vh;overflow:auto;box-shadow:0 50px 120px rgba(0,0,0,0.5)}

    /* ---------- NYOTA WIDGET ---------- */
    .nyota{position:fixed;right:20px;bottom:20px;background:linear-gradient(180deg,#fff,#f8f6f2);border-radius:16px;padding:12px;box-shadow:0 18px 40px rgba(0,0,0,0.18);width:320px;max-width:92vw;z-index:500}
    .nyota .top{display:flex;gap:12px;align-items:center}
    .nyota .avatar{width:48px;height:48px;border-radius:10px;background:var(--green-600);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800}
    .nyota .actions{display:flex;gap:8px;margin-top:10px}
    .nyota .transcript{margin-top:8px;color:var(--muted);font-size:13px}

    /* ---------- THEME WAVE ---------- */
    .wave-wrap{position:fixed;inset:auto 0 0 0;height:140px;pointer-events:none;z-index:30;overflow:hidden}
    .wave{position:absolute;bottom:-60px;left:0;right:0;height:220px;background:linear-gradient(180deg,var(--green-800),transparent);transform:translateY(120%);transition:transform 900ms cubic-bezier(.2,.9,.25,1);border-top-left-radius:60% 60px;border-top-right-radius:60% 60px}
    body.dark .wave{transform:translateY(0)}

    /* ---------- LIGHT/DARK ---------- */
    body.dark{background:#05120b;color:#e9f6ee}
    body.dark header{background:linear-gradient(180deg,rgba(3,7,6,0.85),rgba(3,7,6,0.6))}
    body.dark .card{background:#0b1a13}
    body.dark .why-box{background:linear-gradient(180deg,#08120a,#07110a)}
    body.dark .modal .panel{background:#08120a;color:#dff1df}
    body.dark footer{background:linear-gradient(180deg,#07120b,#020a05)}
    body.dark .nyota{background:linear-gradient(180deg,#08130a,#07100b);color:#dff1df}

    /* ---------- UTILS & RESPONSIVE ---------- */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    @media (max-width:1000px){ .cards{grid-template-columns:repeat(2,1fr);} .grid-4{grid-template-columns:repeat(2,1fr)} .split{grid-template-columns:1fr} .hero h1{font-size:34px} .nyota{width:88vw} }
    @media (max-width:600px){ .cards{grid-template-columns:1fr} .hero-inner{left:18px;right:18px} .hero{padding:18px} header{padding:10px} nav ul{display:none} }
  </style>
</head>
<body>
  <!-- THEME WAVE -->
  <div class="wave-wrap" aria-hidden="true"><div class="wave" id="wave"></div></div>

  <!-- HEADER -->
  <header>
    <div class="brand" aria-label="Kifaru Trails">
      <div class="logo" aria-hidden>ü¶è</div>
      <div>
        <div style="font-weight:800;letter-spacing:1px">KIFARU TRAILS</div>
        <div style="font-size:12px;color:var(--muted)">Where the Wild Leads You</div>
      </div>
    </div>

    <nav aria-label="Main navigation">
      <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#tours">Tours</a></li>
        <li><a href="#trekking">Trekking</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><button id="themeToggle" class="btn" aria-pressed="false" title="Toggle theme">Theme</button></li>
      </ul>
    </nav>
  </header>

  <main id="home">
    <!-- HERO -->
    <section class="hero container" aria-labelledby="hero-heading" style="padding-top:20px">
      <div class="hero-visual" style="background-image:url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=1600&q=80');min-height:420px;">
        <div class="hero-inner" role="banner" aria-label="Hero text">
          <h1 id="hero-heading">Where the Wild Leads You.</h1>
          <p class="lead">Experience Tanzania's raw beauty with expert local guides. From sunrise safaris to midnight campfires beneath the Milky Way ‚Äî every trip is handcrafted.</p>
          <div class="cta-row">
            <button class="btn primary" id="planBtn">Plan Your Safari</button>
            <button class="btn secondary" id="exploreBtn">Explore Packages</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" aria-labelledby="about-h" class="container">
      <div class="split">
        <div><img src="https://images.unsplash.com/photo-1506086679528-4f1b5a3a5bb7?auto=format&fit=crop&w=1000&q=80" alt="Rhino at dawn"></div>
        <div>
          <h2 id="about-h">About Us</h2>
          <p class="lead"><strong>Kifaru Trails</strong> was born by the cool mists of Maji ya Chai, raised alongside the ancient trails of Tanzania and guided by the rhino's strength. We are a team of local guides, conservation partners and hospitality professionals who craft intimate, small-group safaris and trips that respect wildlife and uplift communities.</p>
          <p class="lead">Expect knowledgeable guides, comfortable handpicked lodges, and routes that favour authenticity over crowds. Travel with purpose ‚Äî every itinerary includes community partnerships and environmental support.</p>
        </div>
      </div>
    </section>

    <!-- FEATURED TOURS -->
    <section id="tours" class="container" aria-labelledby="tours-h">
      <h2 id="tours-h">Featured Tours</h2>
      <div class="cards" id="featuredCards">
        <article class="card" tabindex="0" data-full="Serengeti Migration Safari\n\nDay 1: Arrival to camp, evening briefing.\nDay 2: Game drives in northern Serengeti.\nDay 3: Full-day migration viewing.\nDay 4: Visit local conservation project.\nDay 5: Transfer & departure.">
          <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1521295121783-8a321d551ad2?auto=format&fit=crop&w=1200&q=80')"></div>
          <div class="meta">
            <h3>Serengeti Migration Safari</h3>
            <p>Witness the great migration where millions of wildebeest thunder across the plains.</p>
            <a class="read" href="#" data-card="serengeti">Read More</a>
          </div>
        </article>

        <article class="card" tabindex="0" data-full="Ngorongoro Crater Adventure\n\nDay 1: Arusha to Ngorongoro, scenic rim views.\nDay 2: Full crater game drive.\nDay 3: Visit Maasai community, return.">
          <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1528909514045-2fa4ac7a08ba?auto=format&fit=crop&w=1200&q=80')"></div>
          <div class="meta">
            <h3>Ngorongoro Crater Adventure</h3>
            <p>Explore the caldera ‚Äî an exclusive wildlife haven and UNESCO gem.</p>
            <a class="read" href="#" data-card="ngorongoro">Read More</a>
          </div>
        </article>

        <article class="card" tabindex="0" data-full="Zanzibar Beach Escape\n\nDay 1: Arrival & Stone Town walking tour.\nDay 2: Spice farm visit.\nDay 3: Beach & snorkeling.\nDay 4: Dhow sunset cruise.">
          <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1200&q=80')"></div>
          <div class="meta">
            <h3>Zanzibar Beach Escape</h3>
            <p>Turquoise waters, coral reefs, and spice farm visits ‚Äî relax or explore.</p>
            <a class="read" href="#" data-card="zanzibar">Read More</a>
          </div>
        </article>

        <article class="card" tabindex="0" data-full="Tarangire Elephant Trails\n\nDay 1: Arrival and sunset drive.\nDay 2: Full-day with large elephant herds and baobab landscapes.\nDay 3: Optional walking safari with a ranger.">
          <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1518684079-45b9d6f7b8d8?auto=format&fit=crop&w=1200&q=80')"></div>
          <div class="meta">
            <h3>Tarangire Elephant Trails</h3>
            <p>Known for large elephant herds and baobab-studded landscapes.</p>
            <a class="read" href="#" data-card="tarangire">Read More</a>
          </div>
        </article>
      </div>

      <!-- Culture & Zanzibar row -->
      <h3 style="margin-top:26px">Culture Tours & Zanzibar</h3>
      <div class="cards" style="margin-top:8px">
        <article class="card" data-full="Cultural Villages & Markets\n\nA deep dive into local life: home-cooked meals, traditional dances, and community visits. 3‚Äì5 day options.">
          <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=1200&q=80')"></div>
          <div class="meta"><h3>Cultural Villages</h3><p>Engage with local communities and traditions.</p><a class="read" href="#" data-card="culture">View Itinerary</a></div>
        </article>

        <article class="card" data-full="Zanzibar Spice & Culture\n\nStone town history, spice farm tours and dhow trips. 4‚Äì7 day itineraries tailored to your pace.">
          <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1473625247510-8ceb1760943f?auto=format&fit=crop&w=1200&q=80')"></div>
          <div class="meta"><h3>Spice & Stone Town</h3><p>History, aromas and ocean.</p><a class="read" href="#" data-card="spice">View Itinerary</a></div>
        </article>

        <article class="card" data-full="Mountain Walks & Short Treks\n\nGuided hikes in the foothills around Arusha and Meru for 1‚Äì3 day options. Ideal for acclimatisation and nature photography.">
          <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1516569427821-5c9acb2f94b3?auto=format&fit=crop&w=1200&q=80')"></div>
          <div class="meta"><h3>Mountain Walks</h3><p>Short hikes and nature walks led by local guides.</p><a class="read" href="#" data-card="mountainwalk">View Itinerary</a></div>
        </article>
      </div>
    </section>

    <!-- TREKKING -->
    <section id="trekking" class="container" aria-labelledby="trek-h">
      <h2 id="trek-h">Trekking ‚Äî Kilimanjaro & Meru</h2>
      <div class="cards" style="margin-top:12px">
        <article class="card" data-full="KILIMANJARO ‚Äî LEMOSHO ROUTE (8 DAYS)\n\nDay 1: Arrival & hotel in Moshi.\nDay 2: Lemosho Gate to Shira 1.\nDay 3: Shira 1 to Shira 2.\nDay 4: Shira Plateau to Barranco Camp.\nDay 5: Barranco to Karanga Camp.\nDay 6: Karanga to Barafu Camp (preparation).\nDay 7: Summit night to Uhuru Peak, descend to Mweka.\nDay 8: Transfer & celebration.">
          <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=1200&q=80')"></div>
          <div class="meta"><h3>Kilimanjaro ‚Äî Lemosho (8 days)</h3><p>Well-paced route for high summit success and acclimatisation.</p><a class="read" href="#" data-card="kili">Full Itinerary</a></div>
        </article>

        <article class="card" data-full="MOUNT MERU (3‚Äì4 DAYS)\n\nDay 1: Approach & Miriakamba Hut.\nDay 2: Summit attempt & Saddle Hut.\nDay 3: Descent and transfer to Arusha.">
          <div class="thumb" style="background-image:url('https://images.unsplash.com/photo-1505765053960-7bbf6798f6b6?auto=format&fit=crop&w=1200&q=80')"></div>
          <div class="meta"><h3>Mount Meru (3‚Äì4 days)</h3><p>Lush montane forest and alpine scenery; ideal warm-up for Kili.</p><a class="read" href="#" data-card="meru">Full Itinerary</a></div>
        </article>
      </div>
    </section>

    <!-- WHY CHOOSE US -->
    <section id="why" class="container" aria-labelledby="why-h">
      <h2 id="why-h">Why Choose Us</h2>
      <div class="grid-4" style="margin-top:12px">
        <div class="why-box"><div class="icon">ü¶è</div><strong>Expert Local Guides</strong><div style="color:var(--muted)">Born to these lands, trained and certified.</div></div>
        <div class="why-box"><div class="icon">üß≠</div><strong>Tailor-Made Itineraries</strong><div style="color:var(--muted)">Every trip suits your pace and purpose.</div></div>
        <div class="why-box"><div class="icon">üå±</div><strong>Sustainable Tourism</strong><div style="color:var(--muted)">Community-first partnerships and conservation fees.</div></div>
        <div class="why-box"><div class="icon">‚≠ê</div><strong>Trusted Worldwide</strong><div style="color:var(--muted)">Rave reviews and long-standing local relationships.</div></div>
      </div>
    </section>

    <!-- TESTIMONIALS -->
    <section id="testimonials" class="container" aria-labelledby="test-h">
      <h2 id="test-h">Testimonials</h2>
      <div class="carousel" aria-live="polite" style="margin-top:12px">
        <div class="quote">"Kifaru Trails gave us the journey of a lifetime ‚Äî expert guides, magical nights under the stars." ‚Äî Sarah, UK</div>
        <div class="quote">"We climbed Kilimanjaro with their team ‚Äî professional, caring and relentless in support." ‚Äî Ahmed, UAE</div>
        <div class="quote">"Zanzibar was a dream. The spice tour was the highlight." ‚Äî Lina, Sweden</div>
      </div>
    </section>

    <!-- CTA STRIP -->
    <section class="container" aria-hidden="false" style="margin-top:18px">
      <div class="cta-strip">
        <div>
          <h3>Your adventure begins here.</h3>
          <p style="margin:6px 0;color:rgba(255,255,255,0.9)">Choose a date, pick a guide, and set off beneath the Milky Way.</p>
        </div>
        <div><button class="btn primary" id="bookNow">Book Now</button></div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="container" aria-labelledby="contact-h" style="margin-top:26px">
      <h2 id="contact-h">Contact Us</h2>
      <p class="lead">Click any icon to reach us instantly.</p>
      <div style="display:flex;gap:12px;align-items:center;margin-top:12px">
        <!-- WhatsApp -->
        <a href="https://wa.me/REPLACE_NUMBER" target="_blank" rel="noopener" aria-label="WhatsApp" style="display:inline-flex;align-items:center;gap:8px;text-decoration:none;padding:10px;border-radius:10px;background:#25D366;color:#fff">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="filter:drop-shadow(0 2px 6px rgba(0,0,0,0.12))"><path d="M17.472 14.382c-.297-.149-1.758-.868-2.03-.967-.273-.099-.472-.149-.672.149-.198.297-.77.967-.942 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.019-.458.13-.606.134-.133.298-.347.447-.52.149-.173.198-.298.298-.497.099-.198.05-.372-.025-.52-.074-.149-.672-1.611-.92-2.207-.242-.579-.487-.5-.672-.51l-.573-.01c-.198 0-.52.074-.793.372-.273.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.095 3.2 5.076 4.487 2.98 1.288 2.98.858 3.51.806.53-.05 1.727-.7 1.97-1.374.243-.674.243-1.25.17-1.374-.074-.124-.272-.198-.57-.347z" fill="#fff"/></svg>
          WhatsApp
        </a>

        <!-- Phone -->
        <a href="tel:+255000000000" aria-label="Phone" style="display:inline-flex;gap:8px;align-items:center;padding:10px;border-radius:10px;background:#0b6623;color:#fff;text-decoration:none">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M22 16.92V21a1 1 0 0 1-1.08 1A19 19 0 0 1 3 4.08 1 1 0 0 1 4 3h4.09a1 1 0 0 1 1 .75c.12.72.36 1.41.72 2.05a1 1 0 0 1-.23 1L8.91 8.91a15 15 0 0 0 6.18 6.18l1.12-1.12a1 1 0 0 1 1-.23c.64.36 1.33.6 2.05.72a1 1 0 0 1 .75 1V21z" fill="#fff"/></svg>
          Call
        </a>

        <!-- Facebook -->
        <a href="https://facebook.com/REPLACE_PAGE" target="_blank" rel="noopener" aria-label="Facebook" style="display:inline-flex;gap:8px;align-items:center;padding:10px;border-radius:10px;background:#1877F2;color:#fff;text-decoration:none">
          Facebook
        </a>

        <!-- Instagram -->
        <a href="https://instagram.com/REPLACE_PAGE" target="_blank" rel="noopener" aria-label="Instagram" style="display:inline-flex;gap:8px;align-items:center;padding:10px;border-radius:10px;background:linear-gradient(45deg,#405de6,#f56040);color:#fff;text-decoration:none">
          Instagram
        </a>
      </div>
    </section>

    <footer class="container" role="contentinfo" aria-label="Footer">
      <div style="display:flex;align-items:center;gap:12px"><div class="logo" aria-hidden>ü¶è</div><div>KIFARU TRAILS ‚Äî Where the Wild Leads You</div></div>
      <div style="font-size:14px;color:rgba(255,255,255,0.9)">¬© <span id="year"></span> Kifaru Trails</div>
    </footer>
  </main>

  <!-- NYOTA VOICE ASSISTANT -->
  <aside class="nyota" role="dialog" aria-label="Nyota voice assistant">
    <div class="top">
      <div class="avatar">‚òÖ</div>
      <div>
        <div style="font-weight:700">Nyota</div>
        <div style="font-size:13px;color:var(--muted)">Your guiding star ‚Äî voice assistant</div>
      </div>
    </div>
    <div style="margin-top:10px;font-size:14px">"Karibu ‚Äî ask me about destinations, itineraries, or say 'help' for suggestions."</div>
    <div class="actions" style="margin-top:12px">
      <button class="btn primary" id="nyotaListen">Speak</button>
      <button class="btn" id="nyotaHelp">Help</button>
    </div>
    <div class="transcript" id="nyotaTranscript">Idle</div>
  </aside>

  <!-- MODAL -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true" aria-label="Itinerary details" id="modalPanel"></div>
  </div>

  <script>
    // ---------- Small helpers & initial values ----------
    document.getElementById('year').textContent = new Date().getFullYear();

    // ---------- Theme toggle with wave ----------
    const themeToggle = document.getElementById('themeToggle');
    const wave = document.getElementById('wave');
    function setTheme(dark){
      document.body.classList.toggle('dark', !!dark);
      themeToggle.setAttribute('aria-pressed', !!dark);
      // wave animation controlled by CSS class on body
    }
    // remember choice in localStorage
    const saved = localStorage.getItem('kifaru_theme') === 'dark';
    setTheme(saved);
    themeToggle.addEventListener('click', ()=>{
      const isDark = !document.body.classList.contains('dark');
      setTheme(isDark);
      localStorage.setItem('kifaru_theme', isDark ? 'dark':'light');
    });

    // ---------- Reveal on scroll ----------
    const revealEls = document.querySelectorAll('.card, h2, .hero-inner, .why-box, .quote');
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting) e.target.style.transform = 'none', e.target.style.opacity = 1;
      });
    }, {threshold: 0.12});
    revealEls.forEach(el => { el.style.opacity = 0; el.style.transform = 'translateY(12px)'; io.observe(el); });

    // ---------- Card modal behavior ----------
    const modal = document.getElementById('modal');
    const modalPanel = document.getElementById('modalPanel');
    document.querySelectorAll('.read').forEach(btn => {
      btn.addEventListener('click', (ev) => {
        ev.preventDefault();
        const card = ev.currentTarget.closest('.card');
        const title = card.querySelector('h3').innerText;
        const details = card.getAttribute('data-full') || 'Itinerary coming soon.';
        openModal(title, details);
      });
    });

    function openModal(title, content){
      modalPanel.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center"><h2 style="margin:0">${escapeHtml(title)}</h2><button id="closeModal" class="btn" style="background:transparent;border-radius:8px;padding:6px 10px">Close</button></div><hr style="margin:12px 0"><pre style="white-space:pre-wrap;font-family:inherit">${escapeHtml(content)}</pre>`;
      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden','false');
      document.getElementById('closeModal').addEventListener('click', closeModal);
    }
    function closeModal(){ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); }
    window.addEventListener('click', e => { if(e.target === modal) closeModal(); });
    window.addEventListener('keydown', e => { if(e.key === 'Escape') closeModal(); });

    function escapeHtml(str){ return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    // ---------- Simple testimonials auto-scroll ----------
    (function autoScroll(){
      const carousel = document.querySelector('.carousel');
      if(!carousel) return;
      let pos = 0;
      setInterval(()=>{
        pos += 300;
        if(pos > carousel.scrollWidth - carousel.clientWidth) pos = 0;
        carousel.scrollTo({left:pos, behavior:'smooth'});
      },4000);
    })();

    // ---------- Nyota voice assistant (Web Speech API) ----------
    const nyotaListen = document.getElementById('nyotaListen');
    const nyotaHelp = document.getElementById('nyotaHelp');
    const nyotaTranscript = document.getElementById('nyotaTranscript');

    const nyotaScripts = {
      wake: "Karibu! I am Nyota, your guiding star through Tanzania. Speak your dream ‚Äî Serengeti, Kilimanjaro, or Zanzibar ‚Äî and I'll light the path.",
      serengeti: "Serengeti‚Ä¶ endless plains alive with wildebeest and lions. Do you want to know about game drives, lodges, or migration timing?",
      zanzibar: "Zanzibar‚Ä¶ where turquoise waves kiss spice-scented air. Should I show you beaches, culture tours, or spice farms?",
      kili: "Kilimanjaro ‚Äî choose Lemosho or Machame. I can show routes, difficulty and acclimatisation tips.",
      help: "Try: 'Show me Serengeti tours', 'I want a Kilimanjaro trek', or 'Contact a guide'. Say 'bye' to end.",
      fallback: "Stars twinkle, but sometimes I miss a word. Could you shine your request again?",
      closing: "Rest easy, rafiki. Nyota will be here when you return."
    };

    function nyotaSpeak(text){
      nyotaTranscript.textContent = 'Nyota: ' + text;
      if('speechSynthesis' in window){
        const utter = new SpeechSynthesisUtterance(text);
        const voices = speechSynthesis.getVoices();
        // try to select a friendly voice (best-effort)
        utter.voice = voices.find(v=>/female|zira|sara|amalia|alloy/i.test(v.name)) || voices[0] || null;
        utter.rate = 1; utter.pitch = 1;
        speechSynthesis.cancel(); speechSynthesis.speak(utter);
      }
    }

    // Very small routing NLP
    function routeNyota(query){
      const t = query.toLowerCase();
      if(t.includes('serengeti')) return nyotaScripts.serengeti;
      if(t.includes('zanzibar')) return nyotaScripts.zanzibar;
      if(t.includes('kilimanjaro') || t.includes('kili')) return nyotaScripts.kili;
      if(t.includes('help')) return nyotaScripts.help;
      if(t.includes('bye') || t.includes('goodbye') || t.includes('asante')) return nyotaScripts.closing;
      return nyotaScripts.fallback;
    }

    // Web Speech Recognition (best-effort)
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition || null;
    let recog = null;
    if(SpeechRecognition){
      recog = new SpeechRecognition();
      recog.lang = 'en-US';
      recog.interimResults = false;
      recog.maxAlternatives = 1;
      recog.onstart = ()=> nyotaTranscript.textContent = 'Nyota: Listening...';
      recog.onresult = (ev) => {
        const txt = ev.results[0][0].transcript;
        nyotaTranscript.textContent = 'You: ' + txt;
        const reply = routeNyota(txt);
        setTimeout(()=> nyotaSpeak(reply), 300);
      };
      recog.onerror = (e) => { nyotaTranscript.textContent = 'Error: ' + e.error; };
      recog.onend = ()=> { /* ready for next */ };
    }

    nyotaListen.addEventListener('click', ()=>{
      nyotaSpeak(nyotaScripts.wake);
      if(recog){
        try{ recog.start(); } catch(e){ /* ignore already listening */ }
      } else {
        const q = prompt('Type your request for Nyota (voice not supported):');
        if(q){ nyotaTranscript.textContent = 'You: ' + q; nyotaSpeak(routeNyota(q)); }
      }
    });

    nyotaHelp.addEventListener('click', ()=> nyotaSpeak(nyotaScripts.help));

    // initial soft greeting
    setTimeout(()=> nyotaSpeak(nyotaScripts.wake), 1200);

    // ---------- Accessibility: focus trap when modal open (basic) ----------
    document.addEventListener('focus', (ev) => {
      if(modal.style.display === 'flex') {
        if(!modal.contains(ev.target)) ev.stopPropagation(), modal.querySelector('.panel').focus();
      }
    }, true);

    // ---------- Small UX: plan/explore/book button targets ----------
    document.getElementById('planBtn').addEventListener('click', ()=> location.hash = '#tours');
    document.getElementById('exploreBtn').addEventListener('click', ()=> location.hash = '#tours');
    document.getElementById('bookNow').addEventListener('click', ()=> alert('Thanks ‚Äî to book, contact us on WhatsApp or Phone.'));

    // ---------- NOTE: Replace placeholders ----------
    console.log('Kifaru Trails ready. Replace REPLACE_NUMBER and REPLACE_PAGE placeholders with real contact links.');
  </script>
</body>
</html>
